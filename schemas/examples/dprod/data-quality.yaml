# ==============================================================================
# DPROD Example 6: Data Quality Promise (Product Catalog)
# ==============================================================================
# YAML equivalent of Example 6 from examples/dprod-translated.ttl
# Schema: schemas/adalbert-core.yaml
#
# DPROD original: dprod:DataContract with dprod:ProviderQualityPromise
# specifying quality metrics (completeness, accuracy, freshness/timeliness).
#
# Translation decisions:
#   dprod:maintainQuality -> odrl:obligation + adalbert-due:conformTo + quality constraints
#   Each quality dimension is an odrl:Constraint combined with odrl:and
#   Adalbert uses conformTo duties with measurable constraints for all SLA types
# ==============================================================================

schema: https://vocabulary.bigbank/adalbert/linkml/core

prefixes:
  odrl: "http://www.w3.org/ns/odrl/2/"
  adalbert: "https://vocabulary.bigbank/adalbert/"
  adalbert_due: "https://vocabulary.bigbank/adalbert/due/"
  ex: "https://example.com/"

parties:
  - id: "ex:quality-team"
    label: "Data Quality Team"

assets:
  - id: "ex:product-catalog"
    label: "Product Catalog Data"
  - id: "ex:product-schema"
    label: "Product Catalog Schema"
  - id: "ex:product-quality-report"
    label: "Product Quality Report"

type: DataContract
id: "ex:contract-product-quality"
label: "Product Catalog Quality Contract"
description: "Product catalog with data quality guarantees: completeness, accuracy, and freshness."
profile:
  - "https://vocabulary.bigbank/adalbert/"
  - "https://vocabulary.bigbank/adalbert/due/"
assigner: "ex:quality-team"
target: "ex:product-catalog"
state: Active
effectiveDate: "2026-01-01T00:00:00Z"

obligation:

  # Provider duty: daily delivery at 05:00 with 1-hour window
  - id: "ex:contract-product-quality/duties/daily-delivery"
    label: "Daily product catalog delivery"
    subject: "ex:quality-team"
    action: "adalbert_due:deliver"
    recurrence: "FREQ=DAILY;BYHOUR=5;BYMINUTE=0"
    deadline: "PT1H"
    # target: inherited from policy (ex:product-catalog)

  # Provider duty: schema conformance
  - id: "ex:contract-product-quality/duties/schema-conformance"
    label: "Product catalog schema conformance"
    subject: "ex:quality-team"
    action: "adalbert_due:conformTo"
    target: "ex:product-schema"

  # Provider duty: data quality conformance
  # DPROD: dprod:ProviderQualityPromise with dprod:maintainQuality
  # Three quality dimensions combined with odrl:and
  - id: "ex:contract-product-quality/duties/quality-conformance"
    label: "Data quality conformance"
    subject: "ex:quality-team"
    action: "adalbert_due:conformTo"
    target: "ex:product-quality-report"
    constraint:
      - id: "ex:contract-product-quality/constraints/quality-compound"
        type: LogicalConstraint
        and:
          - id: "ex:contract-product-quality/constraints/completeness-99-5"
            label: "Completeness >= 99.5%"
            leftOperand: "adalbert_due:completeness"
            operator: "odrl:gteq"
            rightOperand: "99.5"
          - id: "ex:contract-product-quality/constraints/accuracy-99-0"
            label: "Accuracy >= 99.0%"
            leftOperand: "adalbert_due:accuracy"
            operator: "odrl:gteq"
            rightOperand: "99.0"
          - id: "ex:contract-product-quality/constraints/freshness-24h"
            label: "Data no older than 24 hours"
            leftOperand: "adalbert_due:timeliness"
            operator: "odrl:lteq"
            rightOperand: "PT24H"

permission:

  - id: "ex:contract-product-quality/permissions/read"
    label: "Product catalog read access"
    action: "odrl:read"

  - id: "ex:contract-product-quality/permissions/query"
    label: "Product catalog query access"
    action: "adalbert_due:query"

prohibition:

  - id: "ex:contract-product-quality/prohibitions/no-modify"
    label: "No modification"
    action: "odrl:modify"
