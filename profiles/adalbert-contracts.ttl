# =============================================================================
# Adalbert Contracts Extension
# Version: 0.2
# Date: 2026-02-03
# =============================================================================
# Contract lifecycle for data governance.
# Absorbs key DCON concepts without Promise Theory complexity.
# =============================================================================

@prefix adalbert:    <https://vocabulary.bigbank/adalbert/> .
@prefix adalbert-dc: <https://vocabulary.bigbank/adalbert/contracts/> .
@prefix dcon:    <https://vocabulary.bigbank/dcon/> .
@prefix odrl:    <http://www.w3.org/ns/odrl/2/> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix prov:    <http://www.w3.org/ns/prov#> .

# =============================================================================
# EXTENSION DECLARATION
# =============================================================================

<https://vocabulary.bigbank/adalbert/contracts/> a owl:Ontology, odrl:Profile ;
    dcterms:title "Adalbert Contracts Extension"@en ;
    dcterms:description """
        Contract lifecycle management for Adalbert policies.
        
        Provides:
        - DataContract (policy offer with lifecycle)
        - Subscription (activated agreement)
        - Contract states: Draft → Published → Active → Terminated
        - Versioning via prov:wasRevisionOf
        
        Alignment with DCON:
        - dcon:DataContract → adalbert-dc:DataContract (both are Offers)
        - dcon:DataContractSubscription → adalbert-dc:Subscription (Agreements)
        - State mappings via skos:closeMatch (not identity)
    """@en ;
    dcterms:created "2026-02-03"^^xsd:date ;
    owl:versionInfo "0.2" ;
    owl:imports <https://vocabulary.bigbank/adalbert/> .

# =============================================================================
# CONTRACT CLASSES
# =============================================================================

adalbert-dc:DataContract a owl:Class ;
    rdfs:label "Data Contract"@en ;
    skos:definition "Policy offer defining data access terms."@en ;
    rdfs:subClassOf adalbert:Offer ;
    rdfs:comment """
        A DataContract is an Offer from a data provider.
        It defines privileges, duties, and prohibitions for data access.
        
        When accepted (subscribed), becomes a Subscription (Agreement).
    """@en .

adalbert-dc:Subscription a owl:Class ;
    rdfs:label "Subscription"@en ;
    skos:definition "Activated data contract binding provider and consumer."@en ;
    rdfs:subClassOf adalbert:Agreement ;
    rdfs:comment """
        A Subscription is an activated DataContract.
        - grantor: data provider (from contract)
        - grantee: data consumer (subscriber)
        
        Bilateral: both parties may have active duties.
    """@en .

# =============================================================================
# CONTRACT LIFECYCLE
# =============================================================================

adalbert-dc:ContractState a owl:Class ;
    rdfs:label "Contract State"@en ;
    skos:definition "Lifecycle state of a data contract."@en ;
    owl:oneOf (adalbert-dc:Draft adalbert-dc:Published adalbert-dc:Active adalbert-dc:Retired adalbert-dc:Cancelled) .

adalbert-dc:Draft a adalbert-dc:ContractState ;
    rdfs:label "Draft"@en ;
    skos:definition "Contract under development, not yet available."@en .

adalbert-dc:Published a adalbert-dc:ContractState ;
    rdfs:label "Published"@en ;
    skos:definition "Contract available for subscription."@en .

adalbert-dc:Active a adalbert-dc:ContractState ;
    rdfs:label "Active"@en ;
    skos:definition "Contract has active subscriptions."@en .

adalbert-dc:Retired a adalbert-dc:ContractState ;
    rdfs:label "Retired"@en ;
    skos:definition "Contract no longer accepts new subscriptions."@en .

adalbert-dc:Cancelled a adalbert-dc:ContractState ;
    rdfs:label "Cancelled"@en ;
    skos:definition "Contract cancelled before publication."@en .

# =============================================================================
# CONTRACT PROPERTIES
# =============================================================================

adalbert-dc:contractState a owl:ObjectProperty ;
    rdfs:label "contract state"@en ;
    skos:definition "Current lifecycle state of the contract."@en ;
    rdfs:domain adalbert-dc:DataContract ;
    rdfs:range adalbert-dc:ContractState .

adalbert-dc:subscribesTo a owl:ObjectProperty ;
    rdfs:label "subscribes to"@en ;
    skos:definition "The contract this subscription activates."@en ;
    rdfs:domain adalbert-dc:Subscription ;
    rdfs:range adalbert-dc:DataContract .

adalbert-dc:effectiveDate a owl:DatatypeProperty ;
    rdfs:label "effective date"@en ;
    skos:definition "When the contract/subscription becomes effective."@en ;
    rdfs:range xsd:dateTime .

adalbert-dc:expirationDate a owl:DatatypeProperty ;
    rdfs:label "expiration date"@en ;
    skos:definition "When the contract/subscription expires."@en ;
    rdfs:range xsd:dateTime .

# =============================================================================
# VERSIONING (via PROV)
# =============================================================================

# Use prov:wasRevisionOf for contract versioning
# Example: contract:v2 prov:wasRevisionOf contract:v1 .

# =============================================================================
# DCON ALIGNMENT (via skos:closeMatch)
# =============================================================================
# These are close matches, NOT identity. The state machines differ.

adalbert-dc:DataContract skos:closeMatch dcon:DataContract ;
    rdfs:comment "DCON DataContract is also an Offer-like construct."@en .

adalbert-dc:Subscription skos:closeMatch dcon:DataContractSubscription ;
    rdfs:comment "DCON Subscription is also an Agreement-like construct."@en .

# State mappings - close but not identical semantics
adalbert-dc:Draft skos:closeMatch dcon:Draft .
adalbert-dc:Published skos:closeMatch dcon:Published .
adalbert-dc:Active skos:closeMatch dcon:Active .
adalbert-dc:Retired skos:closeMatch dcon:Retired .
adalbert-dc:Cancelled skos:closeMatch dcon:Cancelled .

# Duty state alignment (different state machines: 4 vs 3 states)
# Adalbert: Pending → Active → Fulfilled/Violated
# DCON:  Pending → Fulfilled/Violated (no Active)
adalbert:Pending skos:closeMatch dcon:Pending ;
    rdfs:comment "Close but not identical: Adalbert Pending transitions to Active first."@en .
adalbert:Fulfilled skos:closeMatch dcon:Fulfilled .
adalbert:Violated skos:closeMatch dcon:Violated .

# =============================================================================
# CONTRACT-SPECIFIC OPERANDS
# =============================================================================

adalbert-dc:contractStatus a adalbert:LeftOperand ;
    rdfs:label "contract status"@en ;
    skos:definition "Lifecycle status of the data contract."@en ;
    adalbert:contextKey "contractStatus" .

adalbert-dc:subscriptionStatus a adalbert:LeftOperand ;
    rdfs:label "subscription status"@en ;
    skos:definition "Status of the subscription."@en ;
    adalbert:contextKey "subscriptionStatus" .

# =============================================================================
# END OF EXTENSION
# =============================================================================
